!function(root,factory){"undefined"!=typeof module&&module.exports?module.exports=factory():root.ImageZoom=factory()}(this,(function(){return function ImageZoom(container,opts){"use strict";var options=opts;if(container){var data={sourceImg:{element:null,width:0,height:0,naturalWidth:0,naturalHeight:0},zoomedImgOffset:{vertical:0,horizontal:0},zoomedImg:{element:null,width:0,height:0},zoomLens:{element:null,width:0,height:0}},div=document.createElement("div"),lensDiv=document.createElement("div"),scaleX,scaleY,offset;data.zoomedImgOffset={vertical:options.offset&&options.offset.vertical?options.offset.vertical:0,horizontal:options.offset&&options.offset.horizontal?options.offset.horizontal:0},data.zoomPosition=options.zoomPosition||"right",data.zoomContainer=options.zoomContainer?options.zoomContainer:container;var events={handleEvent:function(event){switch(event.type){case"mousemove":return this.handleMouseMove(event);case"mouseenter":return this.handleMouseEnter(event);case"mouseleave":return this.handleMouseLeave(event);case"scroll":return this.handleScroll(event)}},handleMouseMove:function(event){var offsetX,offsetY,backgroundTop,backgroundRight,backgroundPosition;offset&&(offsetX=zoomLensLeft(event.clientX-offset.left),offsetY=zoomLensTop(event.clientY-offset.top),backgroundPosition="-"+(backgroundTop=offsetX*scaleX)+"px -"+(backgroundRight=offsetY*scaleY)+"px",data.zoomedImg.element.style.backgroundPosition=backgroundPosition,data.zoomLens.element.style.cssText+="transform:translate("+offsetX+"px,"+offsetY+"px);display: block;left:0px;top:0px;")},handleMouseEnter:function(){data.zoomedImg.element.style.display="block",data.zoomLens.element.style.display="block"},handleMouseLeave:function(){data.zoomedImg.element.style.display="none",data.zoomLens.element.style.display="none"},handleScroll:function(){offset=getOffset(data.sourceImg.element)}};return setup(),data.sourceImg.element.complete?onSourceImgLoad():data.sourceImg.element.onload=onSourceImgLoad,{setup:function(){setup()},kill:function(){kill()},_getInstanceInfo:function(){return{setup:setup,kill:kill,onSourceImgLoad:onSourceImgLoad,data:data,options:options}}}}function getOffset(el){if(el){var elRect=el.getBoundingClientRect();return{left:elRect.left,top:elRect.top}}return{left:0,top:0}}function leftLimit(min){return options.width-min}function topLimit(min){return options.height-min}function getValue(val,min,max){return val<min?min:val>max?max:val}function getPosition(v,min,max){var value;return getValue(v,min,max)-min}function zoomLensLeft(left){var leftMin=data.zoomLens.width/2;return getPosition(left,leftMin,leftLimit(leftMin))}function zoomLensTop(top){var topMin=data.zoomLens.height/2;return getPosition(top,topMin,topLimit(topMin))}function setZoomedImgSize(options,data){options.scale?(data.zoomedImg.element.style.width=options.width*options.scale+"px",data.zoomedImg.element.style.height=options.height*options.scale+"px"):options.zoomWidth?(data.zoomedImg.element.style.width=options.zoomWidth+"px",data.zoomedImg.element.style.height=data.sourceImg.element.style.height):(data.zoomedImg.element.style.width="100%",data.zoomedImg.element.style.height="100%")}function onSourceImgLoad(){options.height=options.height||data.sourceImg.element.height,data.sourceImg.element.style.height=options.fillContainer?"100%":options.height+"px",options.width=options.width||data.sourceImg.element.width,data.sourceImg.element.style.width=options.fillContainer?"100%":options.width+"px",setZoomedImgSize(options,data),data.sourceImg.naturalWidth=data.sourceImg.element.naturalWidth,data.sourceImg.naturalHeight=data.sourceImg.element.naturalHeight,data.zoomedImg.element.style.backgroundSize=data.sourceImg.naturalWidth+"px "+data.sourceImg.naturalHeight+"px",options.zoomStyle&&(data.zoomedImg.element.style.cssText+=options.zoomStyle),options.zoomLensStyle?data.zoomLens.element.style.cssText+=options.zoomLensStyle:(data.zoomLens.element.style.background="white",data.zoomLens.element.style.opacity="0.4"),scaleX=data.sourceImg.naturalWidth/options.width,scaleY=data.sourceImg.naturalHeight/options.height,offset=getOffset(data.sourceImg.element),options.scale?(data.zoomLens.width=options.width/(data.sourceImg.naturalWidth/(options.width*options.scale)),data.zoomLens.height=options.height/(data.sourceImg.naturalHeight/(options.height*options.scale))):options.zoomWidth?(data.zoomLens.width=options.zoomWidth/scaleX,data.zoomLens.height=options.height/scaleY):(data.zoomedImg.element.style.display="block",data.zoomLens.width=data.zoomedImg.element.clientWidth/scaleX,data.zoomLens.height=data.zoomedImg.element.clientHeight/scaleY,data.zoomedImg.element.style.display="none"),data.zoomLens.element.style.position="absolute",data.zoomLens.element.style.width=data.zoomLens.width+"px",data.zoomLens.element.style.height=data.zoomLens.height+"px",data.zoomLens.element.pointerEvents="none"}function setup(){if(options.img){var img=document.createElement("img");img.src=options.img,data.sourceImg.element=container.appendChild(img)}else data.sourceImg.element=container.children[0],"IMG"!==data.sourceImg.element.nodeName&&(data.sourceImg.element=data.sourceImg.element.querySelector("img"));switch(options=options||{},container.style.position="relative",data.sourceImg.element.style.width=options.fillContainer?"100%":options.width?options.width+"px":"auto",data.sourceImg.element.style.height=options.fillContainer?"100%":options.height?options.height+"px":"auto",data.zoomLens.element=container.appendChild(lensDiv),data.zoomLens.element.style.display="none",data.zoomLens.element.classList.add("js-image-zoom__zoomed-area"),data.zoomedImg.element=data.zoomContainer.appendChild(div),data.zoomedImg.element.classList.add("js-image-zoom__zoomed-image"),data.zoomedImg.element.classList.add("rounded-xl"),data.zoomedImg.element.style.backgroundImage="url('"+data.sourceImg.element.src+"')",data.zoomedImg.element.style.backgroundRepeat="no-repeat",data.zoomedImg.element.style.display="none",data.zoomPosition){case"left":data.zoomedImg.element.style.position="absolute",data.zoomedImg.element.style.top=data.zoomedImgOffset.vertical+"px",data.zoomedImg.element.style.left=data.zoomedImgOffset.horizontal-2*data.zoomedImgOffset.horizontal+"px",data.zoomedImg.element.style.transform="translateX(-100%)";break;case"top":data.zoomedImg.element.style.position="absolute",data.zoomedImg.element.style.top=data.zoomedImgOffset.vertical-2*data.zoomedImgOffset.vertical+"px",data.zoomedImg.element.style.left="calc(50% + "+data.zoomedImgOffset.horizontal+"px)",data.zoomedImg.element.style.transform="translate3d(-50%, -100%, 0)";break;case"bottom":data.zoomedImg.element.style.position="absolute",data.zoomedImg.element.style.bottom=data.zoomedImgOffset.vertical-2*data.zoomedImgOffset.vertical+"px",data.zoomedImg.element.style.left="calc(50% + "+data.zoomedImgOffset.horizontal+"px)",data.zoomedImg.element.style.transform="translate3d(-50%, 100%, 0)";break;case"original":data.zoomedImg.element.style.position="absolute",data.zoomedImg.element.style.top="0px",data.zoomedImg.element.style.left="0px";break;default:data.zoomedImg.element.style.position="absolute",data.zoomedImg.element.style.top=data.zoomedImgOffset.vertical+"px",data.zoomedImg.element.style.right=data.zoomedImgOffset.horizontal-2*data.zoomedImgOffset.horizontal+"px",data.zoomedImg.element.style.transform="translateX(100%)"}return container.addEventListener("mousemove",events,!1),container.addEventListener("mouseenter",events,!1),container.addEventListener("mouseleave",events,!1),data.zoomLens.element.addEventListener("mouseenter",events,!1),data.zoomLens.element.addEventListener("mouseleave",events,!1),window.addEventListener("scroll",events,!1),data}function kill(){return container.removeEventListener("mousemove",events,!1),container.removeEventListener("mouseenter",events,!1),container.removeEventListener("mouseleave",events,!1),data.zoomLens.element.removeEventListener("mouseenter",events,!1),data.zoomLens.element.removeEventListener("mouseleave",events,!1),window.removeEventListener("scroll",events,!1),data.zoomLens&&data.zoomedImg&&(container.removeChild(data.zoomLens.element),data.zoomContainer.removeChild(data.zoomedImg.element)),options.img?container.removeChild(data.sourceImg.element):(data.sourceImg.element.style.width="",data.sourceImg.element.style.height=""),data}}}));